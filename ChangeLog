2008-03-25  Keiji Shinzato  <shinzato@reed.kuee.kyoto-u.ac.jp>

	* doc/manual.tex: updated.

	* scripts/make_idx.pl:
	オプションの追加(-ignore_yomi, -genkei)
	Indexer.pmの変更に対応
	$midashiを$midasiに変更

	* scripts/TsubakiEngine4SynGraphSearch.pm:
	merge_docs()メソッドを修正

	* scripts/TsubakiEngine4OrdinarySearch.pm:
	dpnd_on, dist_on, MIN_DLENGTHオプションの追加
	OKAPIのパラメタを変更
	クエリの重みをスコア付けに利用
	q2scoreにより各索引のスコアをログに保存

	* scripts/TsubakiEngine.pm:
	requisiteフラグに対応
	係り受け、近接の利用をオプション化
	近接制約を語順に依存しないようにした

	* scripts/Retrieve.pm:
	SynGraphインデックスのフォーマット変更に対応(search_syngraph_test_new_format())

	* scripts/Indexer.pm:
	読み削除(ignore_yomi)，原形抽出(genkei)のオプションを追加
	KNP::Resultから索引を抽出するようにした
	連体形の正規化メソッドの追加(normalize_rentai)
	indexing4syngraph中で係り受けPの扱いを誤るバグ修正

	* scripts/snippet_maker_test.pl:
	実行時の引数としてファイルパスを取るように変更

	* scripts/tsubaki_test.pl:
	検索結果の表示フォーマットを変更

	* scripts/seek_test_syn.pl:
	SynGraphインデックスのフォーマット変更に対応

	* scripts/indexer-test.pl:
	Indexer.pmの変更に対応

	* scripts/TsubakiEngineFactory.pm:
	dpnd_on, dist_onオプションに対応

	* cgi/QueryParser.pm:
	索引語の重み付け，削除を行うオプションの追加(trimming)
	メンバ変数を追加(qid2df, gid2qids)
	gdfdbを引くように変更
	SynNodeのgdfを基本ノードのgdfにする

	* cgi/QueryKeyword.pm:
	KNP::Resultを使ってクエリを処理するように変更
	to_string()メソッドのフォーマット変更
	クエリを前処理するオプションの追加(trimming)
	メンバ変数の追加(weight,NE,question_type,isBasicNode,fstring)

	* scripts/tsubaki_server.pl:
	タイトル, URLをローカルでひくようにした
	係り受け，近接の利用をオプション化

2008-03-24  Keiji Shinzato  <skeiji@reed.kuee.kyoto-u.ac.jp>

	* cgi/SnippetMaker.pm:
	extract_sentences_from_content()メソッドの追加．

2008-03-15  Keiji Shinzato  <skeiji@reed.kuee.kyoto-u.ac.jp>

	* cgi/QueryParser.pm: add use Configure.

	* scripts/update-dfdb.sh: small changes.

	* scripts/merge_files.perl: move to Utils/scripts

	* scripts/update-dfdb.sh: make-df-db.perlを使うように変更.

	* scripts/merge_files.perl, scripts/cdb2txt.perl, scripts/update-dfdb.sh:
	added.

2008-03-15  Tomohide Shibata  <shibata@reed.kuee.kyoto-u.ac.jp>

	* cgi/Configure.pm:
	$CONFIG_FILE_PATHを自分と同じディレクトリ以下にあるものを指すように変更

2008-03-13  Keiji Shinzato  <skeiji@reed.kuee.kyoto-u.ac.jp>

	* cgi/configure: Change default values.

	* cgi/query-parser-test.perl: added.

	* ChangeLog: updated.

	* cgi/QueryParser.pm: SynGraphを必要時にだけnewするように変更.

2008-03-13  Keiji Shinzato  <skeiji@nlp.kuee.kyoto-u.ac.jp>

	* cgi/QueryParser.pm:
	SynGraphを必要時にだけnewするように変更.

2008-02-10  Keiji Shinzato  <skeiji@nlp.kuee.kyoto-u.ac.jp>

	* cgi/configure, cgi/configure.nict: KNPのrcfileを含めた．

	* cgi/QueryParser.pm: KNPをnewする時、rcfileを指定するように変更．

	* cgi/QueryParser.pm: SynGraph.pmのロード順序を変更．

	* cgi/configure: SynGraph.pmの置き場所を記述．

	* cgi/QueryParser.pm:
	設定ファイルに記述されたSynGraph.pmをuseするように変更．

	* cgi/configure.nict: SynGraph.pmの置き場所を設定ファイルに記述．

	* cgi/Configure.pm: 設定ファイルのデフォルトパスを変更．

	* cgi/index.cgi, cgi/api.cgi, cgi/SnippetMakerAgent.pm, cgi/SearchEngine.pm:
	設定ファイルに記述された環境変数を用いるように変更．

2008-02-09  Keiji Shinzato  <skeiji@nlp.kuee.kyoto-u.ac.jp>

	* scripts/make-dlength-db.perl: 基本形を計数するバグをフィックス

	* cgi/api.cgi:
	検索結果のソート方法を指定できるようにした（ランダム、スコア）

	* cgi/api.cgi: 検索結果に含めるファイルのサイズを指定できるように変更．

	* cgi/api.cgi: SYNGRAPH検索、近接検索をapiで指定できるようにした．

	* cgi/api.cgi: 内容語ごとにURIエスケープするように変更．

	* cgi/api.cgi:
	検索サーバー側でひかれなかったタイトル・URLの数をログに保存するようにした．

	* cgi/api.cgi:
	キャッシュページを取得する際、utf8化しないオプションno_encodingを追加．

	* cgi/api.cgi:
	SnippetMakerAgentを使ってスニペットを生成するように変更．

	* cgi/api.cgi: 検索結果に含めるフィールドを指定できるようにした．

	* cgi/api.cgi: 検索結果ページ構造体のメンバ変数名の変更に対応．

	* cgi/api.cgi: 文書情報を個別に取得できる機能の追加．

	* cgi/index.cgi:
	同義表現検索時に、SynNodeの中身をツールチップで表示するように変更．

	* cgi/index.cgi: print_search_result関数を整理

	* cgi/index.cgi: SnippetMakerAgentを通してスニペットを作るように変更．

	* cgi/index.cgi:
	検索サーバーから返却されるページ数を調整するパラメータを導入．

	* cgi/index.cgi:
	類似ページ判定の際、no_titleであるページは考慮しないように変更．

	* cgi/index.cgi:
	検索結果をマージする際、空の配列にアクセスしないようにした．

	* cgi/index.cgi:
	検索結果ページのメンバ変数の変更に対応（scoreからscore_totalに変更）．

	* cgi/index.cgi: サービス停止用のフラグを設けた．

	* cgi/index.cgi:
	IDだけでキャッシュされたページが取得できるように変更（今まではディレクトリパスが丸出しになっていた）

	* cgi/index.cgi:
	クエリ解析時間、DFDBをひく時間をログとして保存するように変更．

	* cgi/index.cgi: 検索サーバーが返すタイトル・URLを利用するように変更．

	* cgi/SnippetMakerAgent.pm: select_snippetsメソッドの追加．

	* cgi/SnippetMaker.pm: 不要な関数の削除．

	* cgi/SearchEngine.pm: メンバ変数の変更に対応．

	* cgi/SearchEngine.pm: .keymapファイルを読み込まないように変更．

2007-12-28  Keiji Shinzato  <skeiji@nlp.kuee.kyoto-u.ac.jp>

	* scripts/Indexer.pm: 並列Pを係り受けDに変換する部分のバグ修正

2007-12-20  Keiji Shinzato  <skeiji@nlp.kuee.kyoto-u.ac.jp>

	* scripts/TsubakiEngine4OrdinarySearch.pm:
	インデックスがどの程度文書のスコアに貢献したか返すように変更．係り受け、近接スコアの考慮を制御するフラグオプションの追加．

2007-12-17  Keiji Shinzato  <skeiji@nlp.kuee.kyoto-u.ac.jp>

	* scripts/TsubakiEngine.pm:
	bug fixed.(get_minimun_distnaceでポジションが片方しかない場合は-1を返す)

2007-12-16  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* scripts/TsubakiEngineFactory.pm:
	文書平均長をオプションで指定できるように変更

2007-11-10  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* scripts/TsubakiEngine4SynGraphSearch.pm, scripts/TsubakiEngineFactory.pm:
	store_verboseオプションを復活

2007-10-31  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* scripts/TsubakiEngine4SynGraphSearch.pm:
	検索クエリに含まれる係り受けがドキュメント集合に一度も出てこない場合にdieしていたのを修正

	* scripts/TsubakiEngine.pm:
	関数get_minimum_distanceを外部関数に

2007-10-24  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* scripts/TsubakiEngine4OrdinarySearch.pm:
	検索クエリに含まれる係り受けがドキュメント集合に一度も出てこない場合にdieしていたのを修正

2007-10-10  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* scripts/binarize_idx.pl:
	入力ファイルがカレントディレクトリにあるファイルの場合に対応

2007-07-18  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* cgi/QueryParser.pm, scripts/Indexer.pm:
	ストップワードを指定できるようにした

2007-07-16  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* scripts/TsubakiEngine.pm:
	ログを保持するオプションを追加

2007-07-11  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* scripts/TsubakiEngine.pm, cgi/QueryKeyword.pm, cgi/QueryParser.pm:
	qtfを考慮するように変更

2007-07-10  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* scripts/Indexer.pm:
	<下位語数>をインデックスに含めないように変更

2007-07-09  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* scripts/TsubakiEngine.pm, scripts/tsubaki_test.pl:
	単語に対する係り受けのスコアの重みを指定できるようにした(デフォルト:1)
	
2007-07-08  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* scripts/tsubaki_test.pl:
	下位語数が $opt{hypocut} より大きければ、SYNノードをはりつけないようにした(デフォルト値:9)

	* cgi/QueryParser.pm:
	$opts->{syngraph_option}を受け付けるようにした

2007-07-03  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* scripts/TsubakiEngine.pm:
	小規模なテスト用にdlengthのDBをハッシュでもつオプションを追加

2007-06-28  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* scripts/binarize_idx.pl:
	足切りの閾値をオプション化

	* README:
	updated.

2007-06-27  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/make_idx.pl:
	-position指定時に出現している文IDも出力するように変更

2007-06-26  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/make_idx.pl:
	-z, -position, -synオプションの追加.
	コード整理.

	* scripts/Indexer.pm:
	SynGraph解析結果からインデックスを作成するメソッドの追加.
	同一文中に複数回出現する単語の出現位置が上書きされるバグを修正.

2007-06-19  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Indexer.pm:
	SynGraph解析結果からインデックスを作成するメソッドの追加，単語の出現位置を＜意味有＞の付かない語についても持つように変更. (文間をつめるように変更)

2007-03-16  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Indexer.pm:
	索引語の文中の位置(文の先頭から何単語目か)および文書中の位置(文書の先頭から何単語目か)を保持するように変更.（否自立語は数えない、文間はあける）

2007-03-16  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* cgi/QueryParser.pm:
	Indexer.pmのオブジェクト化に対応

	* scripts/make_idx.pl:
	バグ修正.

	* cgi/api.cgi
	ログファイルを出力するディレクトリを変数化.

	* cgi/index.cgi
	ログファイルを出力するディレクトリを変数化.
	
2007-03-15  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* scripts/Indexer.pm:
	関数makeIndexfromKnpResultに、係り受けインデックスを行わないオプション(-no-dpnd)を追加

2007-03-14  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/make_idx.pl:
	Annotationタグの変更に対応、Indexer.pmのオブジェクト化に対応.

	* scripts/Retrieve.pm:
	printLog関数追加、forkに対応.
	
	* scripts/Binarizer.pm:
	idxファイルをバイナリ化するクラスを追加.

	* scripts/binarize_idx.pl:
	Binarizer.pmを用いてidxファイルのバイナリ化をするように変更.

	* scripts/merge_idx.pl:
	suffix(*.idx.gzの.gzなど)を指定するオプション-suffix、分割してマージする際のオプション-nを追加.

	* scripts/merge_sorted_idx.pl:
	suffix(*.idx.gzの.gzなど)を指定するオプション-suffixの追加.

	* scripts/mk_ngram.pl:
	文字Nグラムインデックスを作成するmk_ngram.plを追加.

	* scripts/binarize_idx3.pl:
	文字Nグラムインデックスをバイナリ化するbinarize_idx3.plを追加.

	* scripts/se_server.pl:
	forkに対応、処理を関数化(parseInput, search_wo_hash, returnSearchResults)、Retrieve.pmからいくつかの処理を移動(calculateDocumentScores, calculateOKAPIScore, intersect_wo_hash).

	* scripts/idx2df.pl:
	idxファイルを "単語 文書頻度" の形に変換するidx2df.plを追加.

	* cgi/QueryParser.pm:
	検索クエリを内部表現に変換するクラスQueryParser.pmを追加.

	* cgi/SearchEngine.pm:
	検索サーバにアクセスするクラスSearchEngine.pmを追加.

	* cgi/SnippetMaker.pm:
	標準フォーマットからsnippetを作成するクラスSnippetMaker.pmを追加.

	* cgi/index.cgi:
	snippetの作成、検索サーバへの問い合わせ、クエリの解析等apiと共通する部分をクラス化し、共有するように変更.

	* cgi/api.cgi:
	index.cgiと共通の処理を、各処理に対応したクラスを介して行うように変更.
	
2007-03-11  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Indexer.pm:
	係り先が最後の基本句の場合、係り元の係り先として-1をとっていたバグを修正
	
2007-02-21  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Indexer.pm:
	並列句の係り元の係り先を、係り先の係り先にするように変更.
	フォークとナイフで食べる: フォーク->食べる，ナイフ->食べる

2007-02-21  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Indexer.pm:
	インデックスのポジションを出力するように変更.
	オブジェクト化.

2006-12-04  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/make_index.pl:
	ウィンドウ幅を指定してインデックスを作成するオプション-windowの追加.

2006-10-31  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Indexer.pm:
	jumanの解析結果を索引付けする際、記号を無視するように変更.

2006-10-30  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/make_idx.pl:
	Indexer.pm の 変更(use utf8)に対応.

2006-10-30  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Indexer.pm:
	makeIndexfromJumanResult, makeIndexfromKnpResult に関数名を変更.

2006-10-30  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Indexer.pm:
	use utf8 変更に伴う文字コード関係のバグを修正.

2006-10-30  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Indexer.pm:
	use utf8 の追加と不要な文字列が出力されるバグを修正.

2006-10-29  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Indexer.pm:
	アルファベットの小文字を大文字に変換して索引付けするように変更.
	
2006-10-29  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Indexer.pm:
	複数の代表表記を持つ形態素を索引付けする際、代表表記の個数で割って頻度をとるように変更.
	
2006-10-27  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Retrieve.pm:
	DF値を文書集合全体から求めるように変更.

2006-10-26  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/merge_sorted_idx.pl:
	正規表現にマッチしない場合のエラー処理を追加

2006-10-24  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Indexer.pm:
	<記号>でははじけない記号を文字コードを見て削除

2006-10-23  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/make_idx.pl:
	係り受けインデックスを作成するオプション(-knp)を追加

2006-10-23  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* scripts/Indexer.pm:
	jumanまたはknpの解析結果から索引付けする要素を抽出するモジュール(Indexer.pm)を追加

2006-10-19  Keiji Shinzato  <shinzato@nlp.kuee.kyoto-u.ac.jp>
	* cgi/Retrieve.pm:
	intersect_wo_hash関数で、全ての検索クエリを含まない文書が選択されるバグを修正.

2006-09-20  Daisuke Kawahara  <dk@nict.go.jp>

	* cgi/index.cgi:
	modified to use Retrieve.pm:

	* cgi/api.cgi:
	added a framework for acquiring xml information.

2006-09-12  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* cgi/index.cgi:
	added.

2006-09-11  Daisuke Kawahara  <dk@nict.go.jp>

	* scripts/Retrieve.pm:
	closedirしていなかったのを修正

2006-09-08  Daisuke Kawahara  <dk@nict.go.jp>

	* cgi/api.cgi:
	added.

2006-09-08  Tetsuro Sasada  <sasada@nlp.kuee.kyoto-u.ac.jp>

	* scripts/Retrieve.pm:
	added OKAPI.

2006-09-08  Tomohide Shibata  <shibata@nlp.kuee.kyoto-u.ac.jp>

	* sample_dat:
	added.

2006-09-08  Daisuke Kawahara  <dk@nict.go.jp>

	* scripts/retrieve.pl:
	retrieve.plをモジュール化

	* scripts/Retrieve.pm:
	added.

2006-08-28  Ryohei Sasano  <ryohei@nlp.kuee.kyoto-u.ac.jp.ac.jp>

	* scripts/make_idx.pl:
	大量のファイルを読み込むときにMemoryが足りなくなるバグを修正
	XMLをテキストとして処理するオプション(-direct)を追加
	
2006-08-25  Ryohei Sasano  <ryohei@nlp.kuee.kyoto-u.ac.jp.ac.jp>

	* doc/overview.ppt:
        New file.

2006-08-24  Ryohei Sasano  <ryohei@nlp.kuee.kyoto-u.ac.jp.ac.jp>

	* scripts/make_idx.pl, scripts/merge_sorted_idx.pl, scripts/binarize_idx.pl, scripts/merge_idx.pl, scripts/retrieve.pl:
        imported.

